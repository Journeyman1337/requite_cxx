// SPDX-FileCopyrightText: 2024 Daniel Aim√© Valcour <fosssweeper@gmail.com>
//
// SPDX-License-Identifier: MIT

[entry_point

    [local my_var r:i32 3]

    [local my_var_ptr *r:i32 [address_of my_var]]

    c:printf("%d\n" my_var)
    c:printf("%d\n" [dereference my_var_ptr])

    [= [dereference my_var_ptr] 4]

    c:printf("%d\n" my_var)
    c:printf("%d\n" [dereference my_var_ptr])

    [local my_array [array r:i32 42] [indeterminate_value]]

    [for [local x r:i32 0][< x 42][+= x 1]
    
        [= [index_into my_array x] x]
    
    ]

    [for [local x r:i32 0][< x 42][+= x 1]
    
        c:printf("%d " [index_into my_array x])
    
    ]
]